<!--START STYLE-PAGE--><style type="text/css" xmlns="http://www.w3.org/1999/html">    input[type="text"]:disabled{        color: #8b8b8b;        background-color: rgba(255, 123, 56, 0);        border: 0 none;        outline: 0;        box-shadow: 0 0 0 0;    }    .linhaSelecionada{        background: #dff0d8 !important;        font-weight: bold;    }    .table-striped > tbody > tr:nth-child(odd).linhaSelecionada > td, .table-striped > tbody > tr:nth-child(odd) > th {        background: #dff0d8;    }</style><!--END  STYLE-PAGE--><script type="text/javascript">    var remote = new Remote('php/comunicacao.php', 'acesso', 'usuario_permissao');    var remote1 = new Remote('php/comunicacao.php', 'corporativo', 'ccusto');    var remote2 = new Remote('php/comunicacao.php', 'cadastro/reembolso', 'grupo');    var remote3 = new Remote('php/comunicacao.php', 'email', 'email');    var remote4 = new Remote('php/comunicacao.php', 'log', 'log');    var oTable;    var defTable;    var arrCcusto=new Array();    var arrCcusto2=new Array();    function resultGetUsuario(dados) {        renderizaTabelaDefault(dados);    }    //FUNCOES - ACTIVE    function resultGetGrupoAtv(dados) {        $("#selGrupoAprovadores_Atv").html("");        $("#selGrupoAprovadores_Atv").append('<option value=0>Selecione</option>');        for (var i = 0; i < dados.length; i++) {            $("#selGrupoAprovadores_Atv").append('<option value="' + dados[i].id + '">' + dados[i].nome + '</option>');        }        $("#selGrupoAprovadores_Atv").selectpicker("refresh");    }    function resultGetCcustoAtv(dados) {        $("#selCcusto_Atv").append('<option>Selecione</option>');        for (var i = 0; i < dados.length; i++) {            $("#selCcusto_Atv").append('<option value="' + dados[i].id + '">' + dados[i].descricao + '</option>');        }        $("#selCcusto_Atv").selectpicker("refresh");    }    function renderizaTabelaDefault(dados) {        //LOOP TOTOS DADOS        for($i=0; $i<dados.length;$i++){           // ADD COLUNA COM NOVA PROPRIEDADE DO ARRAY DE DADOS           // dados[$i].selecao = '<div style="width: 100%; text-align: center;"><input type="checkbox" data-id="'+dados[$i].id+'"></div>';           //dados[$i].status = '<div style="width: 100%; text-align: center; color: rgb(51, 255, 9); font-size: 20px;" class="profile-data-title fa-check-circle fa" ><span hidden>1'+dados[$i].status+'</span></div>';            // SUBSTTUINDO STATUS COM VERIFICACAO POR ICONE            // if(dados[$i].status.substring(0, 1)==1){            //     dados[$i].status = '<div style="width: 100%; text-align: center;  "><p style="font-size: 13px; color: rgb(51, 255, 9);"><b>'+dados[$i].status.substring(1,dados[$i].status.length)+'</b></p></div>';            // }else if(dados[$i].status.substring(0, 1)==2){            //     dados[$i].status = '<div  style="width: 100%; text-align: center;  "><p style="font-size: 13px; color: rgba(255,150,66,0.8);" ><b>'+dados[$i].status.substring(1,dados[$i].status.length)+'</b></p></div>';            // }else if(dados[$i].status.substring(0, 1)==0){            //     dados[$i].status = '<div style="width: 100%; text-align: center;  "><p style="font-size: 13px; color: rgb(255, 0, 13); "><b>'+dados[$i].status.substring(1,dados[$i].status.length)+'</b></p></div>';            // }            // SUBSTTUINDO STATUS COM VERIFICACAO POR ICONE            dados[$i].status = '<div style="width: 100%; text-align: center;  "><p>'+dados[$i].status.substring(1,dados[$i].status.length)+'</p></div>';        }        // GET DADOS SELECIONADOS COLUNA ATRAVES DA PROPRIEDADE data-id        //var aaa = $("[data-id]:checked").map(function(){ return $(this).attr('data-id')}).get();        // GET DADOS SELECIONADOS COLUNA nth-child(1)        //var aaa = $("[data-id]:checked").closest('tr').find('td:nth-child(1)').map(        //     function(){        //         return $(this).html();        //     }).get();        if (oTable == null) {            defTable = $('#t_dados').html();        } else {            $('#t_dados').html(defTable);        }        var objDataTable = colunasDefaultDataTable($('#t_dados'), dados, function (data) {            remote.executa("getInfoUsuario",{"idUsuario": data.find("td:nth-child(1)").text()}, resultGetUsuario_Info, $('#divInfoUsuario'));            remote1.executa("getCcustoUsuario",{"idUsuario": data.find("td:nth-child(1)").text()}, resultGetCcusto_Info, $('#divInfoUsuario'));        });        oTable = $('#t_dados').dataTable(objDataTable);        $("#t_dados").dataTable();        //$('#t_dados').html(tabelaPadrao(dados, cabecalho));        //var teste = [{nome:"Danilo", label:"Gois", idade: "28"},{nome:"Meire", label:"Gois", idade: "31"},{nome:"Meire", label:"Gois", idade: "33"}];        //var cabecalho = [{nome:"id", label:"<i>Teste</i>"},{nome:"usuario", label:"Colaborador"}];        //APOS RENDERIZADO DADOS DA TABELA CENTRALIZANDO TITULOS        $('#t_dados th').css('text-align','center');        $(window).resize();    }    function renderListCcusto_Atv(dados){        $('#divAdd_ccusto').show();        var conteudo="";        for (var i=0; i< dados.length;i++){            pos=i+1;            conteudo += ' <div class="col-md-6" style="padding-top: 10px">\n' +                '           <div class="panel panel-default ">\n' +                '           <div class="col-md-3" style="padding-top: 10px">\n' +                '               <div class="form-group" >\n' +                '                      <label>C.Custo-'+pos+'</label>\n' +                '                       <input type="text" value="'+dados[i].id_ccusto+'" class="form-control "  disabled="disabled">\n' +                '              </div>\n' +                '           </div>\n' +                '           <div class="col-md-8" style="padding-top: 10px">\n' +                '                 <div class="form-group">\n' +                '                  <label>Descrição</label>\n' +                '                      <input type="text" value="'+dados[i].ccusto+'" class="form-control " disabled="disabled">\n' +                '                 </div>\n' +                '           </div>\n' +                '           <div class="col-md-1" style="padding-top: 10px">\n' +                '                <div class="form-group">\n' +                '                     <ul class="panel-controls" style="padding-top: 10px">\n' +                '                        <li><a href="#" id="btnRem_Item" class="control-danger" data-acao="rem" data-removeitem="'+i+'" title="Remover"><span class="fa fa-minus" ></span></a></li>\n' +                '                     </ul>\n' +                '                </div>\n' +                '            </div>\n' +                '       </div>\n' +                '     </div>';        }        $('#divAdd_ccusto').html(conteudo);    }    function resultGetContasAtv(dados) {        $("#selContas_Atv").html("");        $("#selContas_Atv").html("<option value=0>Selecione</option>");        for (var i = 0; i < dados.length; i++) {            $("#selContas_Atv").append('<option value="' + dados[i].id + '">' + dados[i].nome + '</option>');        }        $("#selContas_Atv").selectpicker("refresh");    }    function addCcusto_Atv() {        var tempObj = {};        tempObj.id_usuario = $("#txtId_Atv").val();        tempObj.id_ccusto = $("#selCcusto_Atv").val();        tempObj.ccusto = $("#selCcusto_Atv option:selected").text();        var id_ccusto = tempObj.id_ccusto;        var bit = 0;        var selecione = $('#selCcusto_Atv').find(":selected").text();        var selecioneVal = $('#selCcusto_Atv').find(":selected").val();        var a = selecioneVal.substring(0, 1);        if(tempObj.id_ccusto != selecione){            if($("#txtId_Atv").val() != "") {                for(var i=0; i<arrCcusto.length; i++) {                    if(id_ccusto==arrCcusto[i].id_ccusto & bit==0){                        noty({                            text: '<br/><b><p><span class="fa fa-check-circle"></span><font size="2">   Erro</font></p></b><p>Centros de Custos já adicionado</p>',                            type: 'error',                            layout: 'topCenter',                            timeout: 4000                        });                        bit=1;                        break;                    }                    if(arrCcusto.length>0){                        for(var i=0; i<arrCcusto.length; i++) {                            var b = arrCcusto[i].id_ccusto.substring(0,1);                            if (a==b){                                noty({                                    text: '<br/><b><p><span class="fa fa-check-circle"></span><font size="2">   Erro</font></p></b><p>Não é possível adicionar mais de um Centro de Custo da mesma empresa</p>',                                    type: 'error',                                    layout: 'topCenter',                                    timeout: 4000                                });                                bit=1;                                break;                            }                        }                    }                    if(bit==1){                        break;                    }                }                if (bit <1) {                    arrCcusto.push(tempObj);                    $("#divAdd_ccusto").show();                    renderListCcusto_Atv(arrCcusto);                    $("#selCcusto_Atv").val("Selecione");                    $("#selCcusto_Atv").selectpicker("refresh");                }            }        }    }    //FUNCOES - EDIT    function addCcusto_Edt() {        var tempObj = {};        tempObj.id_usuario = $("#txtId_Edt").val();        tempObj.id_ccusto = $("#selCcusto_Edt").val();        tempObj.ccusto = $("#selCcusto_Edt option:selected").text();        var id_ccusto = tempObj.id_ccusto;        var bit = 0;        var selecione = $('#selCcusto_Edt').find(":selected").text();        var selecioneVal = $('#selCcusto_Edt').find(":selected").val();        var a = selecioneVal.substring(0, 1);        if(tempObj.id_ccusto != selecione){            if($("#txtId_Edt").val() != ""){                for(var i=0; i<arrCcusto.length; i++) {                    if(id_ccusto==arrCcusto[i].id_ccusto){                        noty({                            text: '<br/><b><p><span class="fa fa-check-circle"></span><font size="2">   Erro</font></p></b><p>Centros de Custos já adicionado</p>',                            type: 'error',                            layout: 'topCenter',                            timeout: 4000                        });                        bit=1;                        break;                    }                    if(arrCcusto.length>0){                        for(var i=0; i<arrCcusto.length; i++) {                            var b = arrCcusto[i].id_ccusto.substring(0,1);                            if (a==b){                                noty({                                    text: '<br/><b><p><span class="fa fa-check-circle"></span><font size="2">   Erro</font></p></b><p>Não é possível adicionar mais de um Centro de Custo da mesma empresa</p>',                                    type: 'error',                                    layout: 'topCenter',                                    timeout: 4000                                });                                bit=1;                                break;                            }                        }                    }                    if(bit==1){                        break;                    }                }                if (bit<1) {                    arrCcusto.push(tempObj);                    $("#divEdt_ccusto").show();                    renderListCcusto_Edt(arrCcusto);                    $("#selCcusto_Edt").val("Selecione");                    $("#selCcusto_Edt").selectpicker("refresh"); $("#selCcusto_Edt").val("Selecione");                    $("#selCcusto_Edt").selectpicker("refresh");                }            }        }    }    function resultGetCcustoEdt(dados) {        $("#selCcusto_Edt").append('<option>Selecione</option>');        for (var i = 0; i < dados.length; i++) {            $("#selCcusto_Edt").append('<option value="' + dados[i].id + '">' + dados[i].descricao + '</option>');        }        $("#selCcusto_Edt").selectpicker("refresh");    }    function resultGetCcusto_Edt(dados){        arrCcusto = new Array();        for (var i=0; i< dados.length;i++){            var tempObj = {};            tempObj.id_usuario = dados[i].id_usuario;            tempObj.id_ccusto = dados[i].id_ccusto;            tempObj.ccusto = dados[i].ccusto;            //            arrCcusto.push(tempObj);        }        renderListCcusto_Edt(arrCcusto);    }    function resultGetGrupoEdt(dados) {        $("#selGrupoAprovadores_Edt").append('<option>Selecione</option>');        for (var i = 0; i < dados.length; i++) {            $("#selGrupoAprovadores_Edt").append('<option value="' + dados[i].id + '">' + dados[i].nome + '</option>');        }        $("#selGrupoAprovadores_Edt").selectpicker("refresh");    }    function renderListCcusto_Edt(dados){        $('#divEdt_ccusto').show();        var conteudo="";        for (var i=0; i< dados.length;i++){            pos=i+1;            conteudo += ' <div class="col-md-6" style="padding-top: 10px">\n' +                '           <div class="panel panel-default ">\n' +                '           <div class="col-md-3" style="padding-top: 10px">\n' +                '               <div class="form-group">\n' +                '                      <label>C.Custo-'+pos+'</label>\n' +                '                       <input type="text" value="'+dados[i].id_ccusto+'" class="form-control "  disabled="disabled">\n' +                '              </div>\n' +                '           </div>\n' +                '           <div class="col-md-8" style="padding-top: 10px">\n' +                '                 <div class="form-group">\n' +                '                  <label>Descrição</label>\n' +                '                      <input type="text" value="'+dados[i].ccusto+'" class="form-control " disabled="disabled">\n' +                '                 </div>\n' +                '           </div>\n' +                '           <div class="col-md-1" style="padding-top: 10px">\n' +                '                <div class="form-group">\n' +                '                     <ul class="panel-controls" style="padding-top: 10px">\n' +                '                        <li><a href="#" id="btnRem_Item" class="control-danger" data-acao="rem" data-removeitem="'+i+'" title="Remover"><span class="fa fa-minus" ></span></a></li>\n' +                '                     </ul>\n' +                '                </div>\n' +                '            </div>\n' +                '       </div>\n' +                '     </div>';        }        $('#divEdt_ccusto').html(conteudo);    }    function resultGetContasEdt(dados) {        $("#selContas_Edt").html("");        for (var i = 0; i < dados.length; i++) {            $("#selContas_Edt").append('<option value="' + dados[i].id + '">' + dados[i].nome + '</option>');        }        $("#selContas_Edt").selectpicker("refresh");    }    //FUNCOES - INFO    function resultGetCcusto_Info(dados){        arrCcusto2 = new Array();        for (var i=0; i< dados.length;i++){            var tempObj = {};            tempObj.id_ccusto = dados[i].id_ccusto;            tempObj.ccusto = dados[i].ccusto;            //            arrCcusto2.push(tempObj);        }        renderListCcusto_Info(arrCcusto2);    }    function renderListCcusto_Info(dados){        var conteudo="";        for (var i=0; i< dados.length;i++){            pos=i+1;            conteudo += '<div class="panel panel-default">' +                '           <div class="col-md-12">\n' +                '               <div class="form-group" style="padding-top: 10px">\n' +                '                      <label>C.Custo-'+pos+'</label>\n' +                '                       <input type="text" value="'+dados[i].id_ccusto+'" class="form-control "  disabled="disabled">\n' +                '              </div>\n' +                '           </div>\n' +                '           <div class="col-md-12" style="padding-top: 10px">\n' +                '                 <div class="form-group">\n' +                '                  <label>Descrição</label>\n' +                '                      <input type="text" value="'+dados[i].ccusto+'" class="form-control " disabled="disabled">\n' +                '                 </div>\n' +                '           </div>\n' +                '       </div>';        }        $('#divCcustoItem').html(conteudo);    }    function resultGetUsuario_Info(dados){        //alert(dados[0].id_status);        //        $("#txtId_Info").val(dados[0].id);        $("#txtUsuario_Info").val(dados[0].usuario);        $("#txtNomeSobrenome_Info").html(dados[0].nome+' '+dados[0].sobrenome);        $("#txtNome_Info").val(dados[0].nome);        $("#txtSobrenome_Info").val(dados[0].sobrenome);        $("#txtCpf_Info").html(dados[0].cpf);        $("#txtEmpresa_Info").val(dados[0].empresa);        $("#txtEmpresaId_Info").val(dados[0].id_empresa);        $("#txtFilial_Info").val(dados[0].filial);        $("#txtUnidade_Info").val(dados[0].unidade);        $("#txtDepartamento_Info").val(dados[0].departamento);        $("#txtDepartamentoId_Info").val(dados[0].id_departamento);        $("#txtCcusto_Info").val(dados[0].ccusto);        $("#txtCcustoId_Info").val(dados[0].id_ccusto);        $("#txtGrupo_Info").val(dados[0].grupo);        $("#txtGrupoId_Info").val(dados[0].id_grupo);        $("#txtConta_Info").val(dados[0].conta);        $("#txtContaId_Info").val(dados[0].id_conta);        var rnd = Math.random();        $("#divImgUser_Info").html('<div class="profile"><div class="profile-image"><img src="php/outros/loadimage.php?n=' + dados[0].id + '&c=' + rnd + '" class="foto_usuario" alt="Usuário"></div></div>');        $("#txtStatus_profile_icon").css("font-size","25px");        if(dados[0].id_status==1){            $("#btnEdt").show();            $("#btnAtv").hide();            $("#txtStatus_profile").html(dados[0].status);            $("#txtStatus_profile").css("color","#33ff09");            $("#txtStatus_profile_icon").removeClass(" fa fa-exclamation-circle fa fa-times-circle ").addClass("fa fa-check-circle");            $("#txtStatus_profile_icon").css("color","#33FF09");        }else if(dados[0].id_status==2){            $("#btnEdt").hide();            $("#btnAtv").show();            $("#txtStatus_profile").html(dados[0].status);            $("#txtStatus_profile").css("color","#ff870c");            $("#txtStatus_profile_icon").removeClass(" fa fa-check-circle fa fa-times-circle ");            $("#txtStatus_profile_icon").addClass("fa fa-exclamation-circle");            // $("#txtStatus_profile_icon").addClass("fa fa-exclamation-circle");            $("#txtStatus_profile_icon").css("color","#ff870c");        }else if(dados[0].id_status==0){            $("#btnEdt").hide();            $("#btnAtv").show();            $("#txtStatus_profile").html(dados[0].status);            $("#txtStatus_profile").css("color","#ff000d");            $("#txtStatus_profile_icon").removeClass(" fa fa-check-circle fa fa-exclamation-circle ").addClass("fa fa-times-circle");            // $("#txtStatus_profile_icon").addClass("fa fa-times-circle");            $("#txtStatus_profile_icon").css("color","#ff000d");        }        $("#txtStatusId_Info").val(dados[0].id_status);        $("#txtStatus_Info").val(dados[0].status);        //    }    function refreshDivInfo(){        $('#divCcustoItem').html('');        //        $("#txtNomeSobrenome_Info").html('');        $("#txtStatus_profile").html('');        $("#txtId_Info").val('');        $("#txtUsuario_Info").val('');        $("#txtNome_Info").val('');        $("#txtSobrenome_Info").val('');        $("#txtCpf_Info").html('');        $("#txtEmpresa_Info").val('');        $("#txtEmpresaId_Info").val('');        $("#txtFilial_Info").val('');        $("#txtUnidade_Info").val('');        $("#txtDepartamento_Info").val('');        $("#txtDepartamentoId_Info").val('');        $("#txtCcusto_Info").val('');        $("#txtCcustoId_Info").val('');        $("#txtGrupo_Info").val('');        $("#txtGrupoId_Info").val('');        $("#txtConta_Info").val('');        $("#txtContaId_Info").val('');        //        $("#divImgUser_Info").html('<div class="profile"><div class="profile-image"><img src="img/user/no-image.jpg" alt="Usuário"></div></div>');        //        $("#txtStatus_profile_icon").removeClass("fa fa-check-circle fa fa-exclamation-circle fa fa-times-circle");    }    function resultUploadFoto(dados){        var rnd = Math.random()        $("#divImgUser").html('<div class="profile"><div class="profile-image"><img src="php/outros/loadimage.php?n='+dados+'&c='+rnd+'" class="foto_usuario" alt="Usuário"></div></div>');    }    //FUNCOES INTERATIVIDADE ELEMENTOS    function exibeDivInfo(divInfo) {        if(divInfo == false){            refreshDivInfo();            $("#pnlInfoUsuario").hide("fast");            $("#btnEdt").hide();            $("#btnAtv").hide();        }else{            refreshDivInfo();            $("#pnlInfoUsuario").show("fast");            $("#btnEdt").hide();            $("#btnAtv").hide();        }    }    function exibeDivPadrao(divPadrao) {        if (divPadrao == false) {            $("#divPadrao").show("fast");            $("#divEdicao").hide("fast");            $("#btnVolEdt").hide();            $("#btnGraEdt").hide();            $("#btnAdd").show();            $("#btnEdt").show();            $("#btnAtv").show();            $("#btnRem").show();        } else {            $("#divPadrao").hide("fast");            $("#divEdicao").show("fast");            $("#btnVolEdt").show();            $("#btnGraEdt").show();            $("#btnAtv").hide();            $("#btnAdd").hide();            $("#btnEdt").hide();            $("#btnVolAtv").hide();            $("#btnGraAtv").hide();            $("#btnRem").hide();            $("#txtSenha_Edt").val('');        }    }    function exibeDivEdicao(divEdicao) {        if (divEdicao == false) {            $("#divPadrao").show("fast");            $("#divEdicao").hide("fast");            $("#btnVolEdt").hide();            $("#btnGraEdt").hide();            $("#btnGraAtv").hide();            $("#btnAdd").show();            $("#btnRem").show();        } else {            $("#divPadrao").hide("fast");            $("#divEdicao").show("fast");            $("#btnVolEdt").show();            $("#btnGraEdt").show();            $("#btnAtv").hide();            $("#btnAdd").hide();            $("#btnEdt").hide();            $("#btnVolAtv").hide();            $("#btnGraAtv").hide();            $("#btnRem").hide();        }    }    function exibeDivAtivacao(divAtivacao) {        if(divAtivacao==true){            $("#sel_empresa").focus();            $("#divPadrao").hide("fast");            $("#divAtivacao").show("fast");            $("#btnVolAtv").show();            $("#btnGraAtv").show();            $("#btnAtv").hide();            $("#btnEdt").hide();            $("#btnRem").hide();            $("#btnAdd").hide();            $('#divAdd_ccusto').hide();            arrCcusto = new Array();        }else{            $("#divAtivacao").hide("fast");            $("#divPadrao").show("fast");            $("#btnVolAtv").hide();            $("#btnGraAtv").hide();            $("#btnAtv").show();            $("#btnEdt").show();            $("#btnRem").show();            $("#btnAdd").show();        }    }    function resultSetUsuarioAtivacao(dados){        if(dados==0){            noty({                text: '<br/><b><p><span class="fa fa-check-circle"></span><font size="2">   Erro</font></p></b><p>Erro ao enviar email para o usuário</p>',                type: 'error',                layout: 'topCenter',                timeout: 4000            });         }else{            noty({                text: '<br/><b><p><span class="fa fa-check-circle"></span><font size="2">   Sucesso</font></p></b><p>Usuário ativado! </br> Um email foi enviado para usuário o notificando da liberação de acesso ao portal</p>',                type: 'success',                layout: 'topCenter',                timeout: 4000            });            exibeDivEdicao(false);            exibeDivAtivacao(false);            exibeDivInfo(true);            refreshDivInfo();            //            $( "#divMain" ).removeClass( "col-md-8 col-md-offset-2" ).addClass(  "col-md-9");            $("#btnEdt").hide();            $("#btnAtv").hide();            //            resultGetUsuario(dados);        }    }    $(document).ready(function () {        remote.executa("getUsuario", null, resultGetUsuario, $('#pnlUsuario'), erroPersonalizado);        remote1.executa("getCcustoAll",null, resultGetCcustoAtv, $('#divAtivacao'), erroPersonalizado);        remote1.executa("getCcustoAll", null, resultGetCcustoEdt, $('#divEdicao'), erroPersonalizado);        remote2.executa("getGrupo", null, resultGetGrupoEdt, $('#divEdicao'), erroPersonalizado);        remote2.executa("getGrupo", null, resultGetGrupoAtv, $('#divAtivacao'), erroPersonalizado);        remote.executa("getContas", null, resultGetContasEdt, $('#divEdicao'), erroPersonalizado);        remote.executa("getContas", null, resultGetContasAtv, $('#divAtivacao'), erroPersonalizado);        //scriptSql RELATORIO PERFORMANCE de upload        var uploader = new plupload.Uploader({            runtimes: 'gears,html5,flash,silverlight,browserplus',            browse_button: 'pickfiles',            drop_element: 'pickfiles',            container: 'container',            chunk_size: '5mb',            max_file_size: '200mb',            url: 'upload.php',            multi_selection: false,            unique_names: true,            flash_swf_url: 'theme/js/plugins/plupload/js/plupload.flash.swf',            silverlight_xap_url: 'theme/js/plugins/plupload/js/plupload.flash.swf',            filters: [                {title: "Imagem jpg", extensions: "jpg"}            ]        });        uploader.bind('Init', function (up, params) {            $('#filelist').html("");        });        $('#uploadfiles').click(function (e) {            uploader.start();            $("#uploadfiles").hide();            e.preventDefault();        });        uploader.init();        uploader.bind('FilesAdded', function (up, files) {            $.each(files, function (i, file) {                $('#filelist').html('<span> ' + file.name + ' (' + plupload.formatSize(file.size) + ') <span id="' + file.id + '"></span>');            });            $("#uploadfiles").show();            up.refresh(); // Reposition Flash/Silverlight        });        uploader.bind('UploadProgress', function (up, file) {            $('#filelist').html('<div class="progress-list"><div class="pull-left"><strong class="text-success">Progresso:</strong></div><div class="pull-right">' + plupload.formatSize(file.loaded) + 'MB/' + plupload.formatSize(file.size) + 'MB (' + file.percent + '%)</div><div class="progress progress-small progress-striped active"><div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="' + file.percent + '" aria-valuemin="0" aria-valuemax="100" style="width: ' + file.percent + '%;">' + file.percent + '%</div></div></div>');        });        uploader.bind('Error', function (up, err) {            $('#filelist').html("Error: " + err.code +                    ", Message: " + err.message +                    (err.file ? ", File: " + err.file.name : "")                    );            up.refresh(); // Reposition Flash/Silverlight        });        uploader.bind('FileUploaded', function (up, file, info) {            $('#filelist').html('<span> ' + file.name + ' (' + plupload.formatSize(file.size) + ') </span><span class="fa fa-check" style="color: #95b75d"></span>');            var obj = JSON.parse(info.response);            arquivo = obj.cleanFileName;            remote.executa("uploadFoto", {"arquivo": obj.cleanFileName, id: $("#txtId_Edt").val()}, resultUploadFoto, $('#divResul .panel'));        });        $("#btnAdd").on('click', function () {            $("#filelist").html("");            $("#divImgUser").html('<div class="profile"><div class="profile-image"><img src="img/user/no-image.jpg" alt="Usuário"></div></div>');            $("#txtId_Edt").val("");            $("#txtNome_Edt").val("");            $("#txtUsuario_Edt").val("");            $("#txtUsuario_Edt").attr("readonly",false);            $("#txtSobrenome_Edt").val("");            $("#txtCpf_Edt").val("");            $("#txtCpf_Edt").removeAttr("disabled");            $("#txtSenha_Edt").val("");            $("#selCcusto_Edt").val("");            $("#selCcusto_Edt").selectpicker("refresh");            $("#selGrupoAprovadores_Edt").val("");            $("#selGrupoAprovadores_Edt").selectpicker("refresh");            $("#selContas_Edt").val("");            $("#selContas_Edt").selectpicker("refresh");            exibeDivPadrao(true);            exibeDivInfo(false);        });        $("#btnEdt").on('click', function () {            $( "#divMain" ).removeClass( "col-md-9" ).addClass( "col-md-8 col-md-offset-2" );            arrCcusto = new Array();            var objTemp = oTable.fnGetData(oTable.closest("table").find(".selected"));            if (objTemp != null) {                $("#filelist").html("");                $("#lblTitulo_Edt").html("Editando...");                $("#txtId_Edt").val(objTemp.id);                $("#txtUsuario_Edt").val(objTemp.usuario);                $("#txtNome_Edt").val(objTemp.nome);                $("#txtSobrenome_Edt").val($("#txtSobrenome_Info").val());                $("#txtCpf_Edt").val(objTemp.cpf);                $("#txtCpf_Edt").attr("readyonly");                $("#selGrupoAprovadores_Edt").val($("#txtGrupoId_Info").val());                $("#selGrupoAprovadores_Edt").selectpicker("refresh");                $("#selContas_Edt").val($("#txtContaId_Info").val());                $("#selContas_Edt").selectpicker("refresh");                $("#selStatus_Edt").val($("#txtStatusId_Info").val());                $("#selStatus_Edt").selectpicker("refresh");                $("#selCcusto_Edt").val("");                $("#selCcusto_Edt").selectpicker("refresh");                remote1.executa("getCcustoUsuario",{ id: $("#txtId_Edt").val()}, resultGetCcusto_Edt, $('#divEdicao'));                $("#divImgUser").html('<div class="profile"><div class="profile-image"><img src="php/outros/loadimage.php?n='+objTemp.id+'" class="foto_usuario" alt="Usuário"></div></div>');                exibeDivPadrao(true);                exibeDivInfo(false);                //                $('#divCcustoItem').html("");            }        });        $("#btnVolEdt").on('click', function () {            $( "#divMain" ).removeClass( "col-md-8 col-md-offset-2" ).addClass(  "col-md-9");            exibeDivPadrao(false);            exibeDivInfo(true);            refreshDivInfo();        });        $("#btnGraEdt").on('click', function () {                var param = {                    id: $("#txtId_Edt").val(),                    usuario: $("#txtUsuario_Edt").val(),                    nome: $("#txtNome_Edt").val(),                    sobrenome: $("#txtSobrenome_Edt").val(),                    cpf: $("#txtCpf_Edt").val(),                    senha: $("#txtSenha_Edt").val(),                    id_grupo: $("#selGrupoAprovadores_Edt").val(),                    id_conta: $("#selContas_Edt").val(),                    status: $("#selStatus_Edt").val(),                    ccusto:arrCcusto                }                //VALIDA USUARIOS MASTERS                // if((param.id == "" || param.id > 3) && param.id_permissao == 1){                //     erroPersonalizado("Não foi possível setar esse nível de acesso para esse usuário!");                //     return;                // }                if(valida_GraEdt()){                    remote.executa("setUsuario", param, resultGetUsuario, $('.panel'), erroPersonalizado);                    exibeDivPadrao(false);                    exibeDivInfo(true);                    refreshDivInfo();                    $( "#divMain" ).removeClass( "col-md-8 col-md-offset-2" ).addClass(  "col-md-9");                }else{                    noty({                        text: '<br/><b><p><span class="fa fa-exclamation-circle"></span><font size="2">   Faltam informações para cadastrar usuário</font></p></b><p>Campos não selecionados</p>',                        type: 'warning',                        layout: 'topCenter',                        timeout: 4000                    });                }        });        $("#btnRem").on('click', function () {            var objTemp = oTable.fnGetData(oTable.closest("table").find(".selected"));            if (objTemp != null) {                $("#txtId_Edt").val(objTemp.id);                $("#modal_small").modal();            }        });        $("#btnRemConf").on('click', function () {            remote.executa("remUsuario", {id: $("#txtId_Edt").val()}, resultGetUsuario, $('.panel'), erroPersonalizado);            refreshDivInfo();        });        $("#btnVolAtv").on('click', function () {            $( "#divMain" ).removeClass( "col-md-8 col-md-offset-2" ).addClass(  "col-md-9");            exibeDivAtivacao(false);            exibeDivInfo(true);            refreshDivInfo();        });        $("#btnAtv").on('click', function () {            $( "#divMain" ).removeClass( "col-md-9" ).addClass(  "col-md-8 col-md-offset-2");            //            arrCcusto=new Array();            var objTemp = oTable.fnGetData(oTable.closest("table").find(".selected"));            if (objTemp != null) {                $("#lblTitulo_Atv").html("Ativando...");                $("#txtId_Atv").val(objTemp.id);                $("#txtUsuario_Atv").val(objTemp.usuario);                $("#txtNome_Atv").val(objTemp.nome);                $("#txtSobrenome_Atv").val($("#txtSobrenome_Info").val());                $("#txtCpf_Atv").val(objTemp.cpf);                $("#selCcusto_Atv").val("");                $("#selCcusto_Atv").selectpicker("refresh");                $("#selGrupoAprovadores_Atv").val("");                $("#selGrupoAprovadores_Atv").selectpicker("refresh");                $("#selContas_Atv").val("");                $("#selContas_Atv").selectpicker("refresh")                exibeDivAtivacao(true);                exibeDivInfo(false);            }        });        $("#t_dados").on('click', 'tr', function () {           console.log($(this).find('td:nth-child(1)').html());        });        $("#btnGraAtv").on('click', function () {            if ($("#selCcusto_Atv").val() != "" && $("#selGrupoAprovadores_Atv").val() != "" && $("#selContas_Atv").val() != "" ){                var param = {                    // id_ccusto: $("#selCcusto_Atv").val(),                    id_usuario: $("#txtId_Atv").val(),                    nome_para: $("#txtNome_Atv").val(),                    email_para: $("#txtUsuario_Atv").val(),                    id_grupo: $("#selGrupoAprovadores_Atv").val(),                    id_conta: $("#selContas_Atv").val(),                    arrCcusto: arrCcusto                };                if(valida_GraAtv()){                    remote.executa("setUsuarioAtivacao", param, resultSetUsuarioAtivacao, $('#divMain'), erroPersonalizado);                }            }        });        $("#btnAdd_ccusto_Atv").on('click', function () {            addCcusto_Atv();        });        $("#btnAdd_ccusto_Edit").on('click', function () {            addCcusto_Edt();        });        //REMOVE CCUSTO EDIT        $("#divEdt_ccusto").on("click", "[data-removeitem]", function () {            $this = $(this);            var tempPos = $this.attr("data-removeitem");            arrCcusto.splice(tempPos,1);            //            renderListCcusto_Edt(arrCcusto);        });        //REMOVE CCUSTO ATV        $("#divAdd_ccusto").on("click", "[data-removeitem]", function () {            $this = $(this);            var tempPos = $this.attr("data-removeitem");            arrCcusto.splice(tempPos,1);            //            renderListCcusto_Atv(arrCcusto);        });        // ADD COR DE LINHA PARA LINHA SELECIONADA        $("#t_dados").on('change', '[data-id]', function(){            $('.linhaSelecionada').removeClass('linhaSelecionada');            $("[data-id]:checked").closest('tr').addClass('linhaSelecionada');        });    });    //VALIDADOES DE FORMULARIOS    function valida_GraAtv() {        var grupo = $('#selGrupoAprovadores_Atv').find(":selected").val();        var conta = $('#selContas_Atv').find(":selected").val();        var valid_ccusto = true;        if(arrCcusto.length==0){            valid_ccusto = false;            noty({                text: '<br/><b><p><span class="fa fa-exclamation-circle"></span><font size="2">   Faltam informações para ativação</font></p></b><p>É necessário adicionar ao menos um (Centro de Custo) ao usuário</p>',                type: 'warning',                layout: 'topCenter',                timeout: 4000            });        }        var valid_grupo = true;        if(grupo ==0){            valid_grupo = false;            noty({                text: '<br/><b><p><span class="fa fa-exclamation-circle"></span><font size="2">   Faltam informações para ativação</font></p></b><p>Campo (Grupo de Aprovação) não selecionado</p>',                type: 'warning',                layout: 'topCenter',                timeout: 4000            });        }        var valid_conta = true;        if(conta =='0'){            valid_conta = false;            noty({                text: '<br/><b><p><span class="fa fa-exclamation-circle"></span><font size="2">   Faltam informações para ativação</font></p></b><p>Campo (Conta) não selecionado</p>',                type: 'warning',                layout: 'topCenter',                timeout: 4000            });        }        if(valid_ccusto==true &  valid_grupo==true & valid_conta==true){            return true        }else {            return false        }    }    function valida_GraEdt(){        var grupo = $('#selGrupoAprovadores_Edt').find(":selected").val();        var conta = $('#selContas_Edt').find(":selected").val();        if(arrCcusto.length>0 &  grupo>0 & conta>0){            return true        }else {            return false        }    }</script><!-- START BREADCRUMB --><ul class="breadcrumb"></ul><!-- END BREADCRUMB --><!-- PAGE CONTENT WRAPPER --><div class="page-content-wrap">    <div class="row">        <div id="divMain" class="col-md-9 ">            <div id="pnlUsuario" class="panel panel-default">                <!--START PAINEL DE CONTROLES-->                <div class="panel-heading">                    <h3 class="panel-title">Usuários</h3>                    <ul class="panel-controls">                        <li><a href="#" id="btnAdd" class="control-info" data-acao="add" title="Adicionar"><span class="fa fa-plus"></span></a></li>                        <li><a href="#" id="btnRem" class="control-danger" data-acao="rem" title="Excluir"><span class="fa fa-minus"></span></a></li>                        <li><a href="#" id="btnEdt" class="control-warning" data-acao="edt" title="Editar" style="display: none;"><span class="fa fa-pencil"  ></span></a></li>                        <li><a href="#" id="btnAtv" class="control-primary" data-acao="edt" title="Ativar" style="display: none;"><span class="fa fa-unlock-alt" ></span></a></li>                        <li><a href="#" id="btnGraEdt" class="control-success" data-acao="graE" title="Confirmar/Salvar" style="display: none;"><span class="fa fa-check"></span></a></li>                        <li><a href="#" id="btnGraAtv" class="control-success" data-acao="graA" title="Ativar" style="display: none;"><span class="fa fa-key"></span></a></li>                        <li><a href="#" id="btnVolEdt" class="control-primary" data-acao="volE" title="Voltar/Cancelar" style="display: none;"><span class="fa fa-mail-reply"></span></a></li>                        <li><a href="#" id="btnVolAtv" class="control-primary" data-acao="volA" title="Voltar/Cancelar" style="display: none;"><span class="fa fa-mail-reply"></span></a></li>                    </ul>                </div>                <!--END PAINEL DE CONTROLES-->                <!--START MENSAGEM ERRO-->                <div class="pull-right">                    <span id="msg" class="center label label-danger label-form" style="display: none;"></span>                </div>                <!--END MENSAGEM ERRO-->                <!--START FORMULARIOS-VIEWS-TABELAS-->                <div class="panel-body">                    <!--START TABELA-->                    <div id="divPadrao" class="row">                        <div class="col-md-12" style="overflow-x: auto;">                            <table id="t_dados" class="table table-striped table-bordered table-condensed">                            </table>                        </div>                    </div>                    <!--END TABELA-->                    <!--START FORMULARIO DE EDICAO-->                    <div id="divEdicao" class="row" style="display: none;">                        <h4 id="lblTitulo_Edt"></h4>                        <div class="col-md-12">                            <div class="form-group">                                <div id="container">                                    <div id="divImgUser">                                        <div class="profile"><div class="profile-image"><img src="img/user/no-image.jpg" alt="Usuário"></div></div>                                    </div>                                    <a id="pickfiles" href="#" class="btn btn-primary">Importar Foto</a>                                    <span id="filelist">Não foi possível fazer upload</span>                                    <button id="uploadfiles" class="btn btn-default" style="display: none;">Upload</button>                                </div>                            </div>                        </div>                        <div class="col-md-12">                            <div class="form-group">                                <label>Usuário</label>                                <input id="txtId_Edt" type="hidden"/>                                <input id="txtUsuario_Edt" type="text" class="form-control" maxlength="50" placeholder="Usuário" readonly>                            </div>                        </div>                        <div class="col-md-12">                            <div class="form-group">                                <label>Senha</label>                                <input id="txtSenha_Edt" type="password" class="form-control" maxlength="50" placeholder="Senha">                            </div>                        </div>                        <div class="col-md-12">                            <div class="form-group">                                <label>Nome</label>                                <input id="txtNome_Edt" type="text" class="form-control" maxlength="50" placeholder="Nome" >                            </div>                        </div>                        <div class="col-md-12">                            <div class="form-group">                                <label>Sobrenome</label>                                <input id="txtSobrenome_Edt" type="text" class="form-control" maxlength="50" placeholder="Sobrenome" >                            </div>                        </div>                        <div class="col-md-12">                            <div class="form-group">                                <label>CPF</label>                                <input id="txtCpf_Edt" type="text" class="form-control" maxlength="50" placeholder="CPF" disabled="disabled">                            </div>                        </div>                        <div class="col-md-12">                            <div class="form-group">                                <label>Centro de Custo</label>                                <select id="selCcusto_Edt" class="form-control" data-live-search="true" ></select>                                <ul class="panel-controls" style="padding-right: 2px;padding-top: 10px;;padding-bottom: 10px">                                    <li ><a href="#" id="btnAdd_ccusto_Edit"  class="control-primary" data-acao="graA" title="Salvar" ><span class="fa fa-plus" ></span></a></li>                                </ul>                            </div>                        </div>                        <div id="divEdt_ccusto" class="row" style="display: none;" >                            <!--CONTENT ADD ITEM CENTRO DE CUSTO -->                        </div>                        <div class="col-md-12">                            <div class="form-group">                                <label>Grupo de Aprovação</label>                                <select id="selGrupoAprovadores_Edt" class="form-control" data-live-search="true" ></select>                            </div>                        </div>                        <div class="col-md-12">                            <div class="form-group">                                <label>Conta</label>                                <select id="selContas_Edt" class="form-control" data-live-search="true"></select>                            </div>                        </div>                        <div class="col-md-12">                            <div class="form-group">                                <label>Status</label>                                <select id="selStatus_Edt" class="form-control" data-live-search="true">                                    <option value="1">Ativo</option>                                    <option value="0">Inativo</option>                                    <option value="2">Aguardando ativação</option>                                </select>                            </div>                        </div>                    </div>                    <!--END FORMULARIO DE EDICAO-->                    <!--START FORMULARIO DE ATIVACAO-->                    <div id="divAtivacao" class="row" style="display: none;">                        <h4 id="lblTitulo_Atv"></h4>                        <div class="col-md-12">                            <div class="form-group">                                <label>Usuario</label>                                <input id="txtId_Atv" type="hidden"/>                                <input id="txtUsuario_Atv" type="text" class="form-control" maxlength="50" placeholder="E mail" readonly>                            </div>                        </div>                        <div class="col-md-12">                            <div class="form-group">                                <label>Nome</label>                                <input id="txtNome_Atv" type="text" class="form-control" maxlength="50" placeholder="Nome" readonly>                            </div>                        </div>                        <div class="col-md-12">                            <div class="form-group">                                <label>Sobrenome</label>                                <input id="txtSobrenome_Atv" type="text" class="form-control" maxlength="50" placeholder="Sobrenome" readonly>                            </div>                        </div>                        <div class="col-md-12">                            <div class="form-group">                                <label>CPF</label>                                <input id="txtCpf_Atv" type="text" class="form-control" maxlength="50" placeholder="CPF" disabled="disabled">                            </div>                        </div>                        <!-- START PAINEL DE ADD CCUSTO-->                        <div class="col-md-12">                            <div class="form-group">                                <label>Centro de Custo</label>                                <select id="selCcusto_Atv"  class=" selCcusto_Atv form-control" data-live-search="true" ></select>                                <ul class="panel-controls" style="padding-right: 2px;padding-top: 10px;;padding-bottom: 10px">                                    <li><a href="#" id="btnAdd_ccusto_Atv" class="control-primary" data-acao="graA" title="Salvar"><span class="fa fa-plus"></span></a></li>                                </ul>                            </div>                        </div>                        </br>                        </br>                        <div id="divAdd_ccusto" class="row" style="display: none;">                            <!--CONTAINER ADD CENTRO DE CUSTO ATV-->                        </div>                        <!-- END PAINEL DE ADD CCUSTO-->                        <div class="col-md-12">                            <div class="form-group">                                <label>Grupo de Aprovação</label>                                <select id="selGrupoAprovadores_Atv" class="form-control" data-live-search="true" ></select>                            </div>                        </div>                        <div class="col-md-12">                            <div class="form-group">                                <label>Conta</label>                                <select id="selContas_Atv" class="form-control" data-live-search="true"></select>                            </div>                        </div>                    </div>                    <!--END FORMULARIO DE ATIVACAO-->                </div>                <!--END FORMULARIOS-VIEWS-TABELAS-->            </div>        </div>        <!-- START INFO PROFILE USER-->        <div class="col-md-3 ">            <div id="pnlInfoUsuario" class="panel panel-default">                <div class="panel-heading">                    <h3 class="panel-title">Informações</h3>                </div>                <div class="panel-body">                    <div id="divInfoUsuario">                        <div class="profile">                            <div id="divImgUser_Info">                                <div class="profile"><div class="profile-image"><img src="img/user/no-image.jpg" alt="Usuário"></div></div>                            </div>                            <div class="profile-data">                                <div id="txtNomeSobrenome_Info" class="profile-data-name "></div>                                <!--<label>CPF</label>-->                                <div id="txtCpf_Info" class="profile-data-name "></div>                                <div id="txtStatus_profile" class="profile-data-title" ></div>                                <div id="txtStatus_profile_icon" class="profile-data-title " ></div>                                <div id="divDados_profile" class="profile-data-title" style="display: none">                                    <!--<input id="txtUsuario_Info" type="text" value="" class="form-control " maxlength="50" >-->                                    <input id="txtNome_Info" type="text" value="" class="form-control " maxlength="50" >                                    <input id="txtSobrenome_Info" type="text" value="" class="form-control " maxlength="50" >                                    <!--<input id="txtId_Info" type="text" value="" class="form-control " maxlength="50" >-->                                    <!--<input id="txtEmpresaId_Info" type="text" value="" class="form-control " maxlength="50" >-->                                    <!--<input id="txtDepartamentoId_Info" type="text" value="" class="form-control " maxlength="50" >-->                                    <!--<input id="txtCcustoId_Info" type="text"  class="form-control " maxlength="50" >-->                                    <input id="txtGrupoId_Info" type="text" value="" class="form-control " maxlength="50" >                                    <input id="txtContaId_Info" type="text" value="" class="form-control " maxlength="50" >                                </div>                            </div>                        </div>                        <div class="panel-body">                            <div id="divUsuario_profile">                                <div id="divCcustoItem">                                    <!--VIEW LISTA DE CENTRO DE CUSTO-->                                </div>                                <div class="col-md-12">                                    <div class="form-group">                                        <label>Grupo</label>                                        <input id="txtGrupo_Info" type="text" value="" class="form-control " maxlength="50"  readonly>                                    </div>                                </div>                                <div class="col-md-12">                                    <div class="form-group">                                        <label>Conta</label>                                        <input id="txtConta_Info" type="text" value="" class="form-control " maxlength="50"  readonly>                                    </div>                                </div>                            </div>                        </div>                    </div>                </div>            </div>        </div>        <!-- END INFO PROFILE USER-->    </div></div><!----><div class="modal" id="modal_small" tabindex="-1" role="dialog" aria-hidden="true">    <div class="modal-dialog modal-sm">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>                <h4 class="modal-title" id="defModalHead">Confirmação</h4>            </div>            <div class="modal-body">                Você tem certeza que deseja remover esse registro?            </div>            <div class="modal-footer">                <button type="button" class="btn btn-danger" data-dismiss="modal">Cancelar</button>                                        <button id="btnRemConf" type="button" class="btn btn-primary" data-dismiss="modal">Sim</button>                                    </div>        </div>    </div></div><!---->